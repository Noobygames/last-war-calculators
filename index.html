<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DR Analyst - A5H 810 Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="bg-black text-white overflow-hidden h-screen flex">
    <aside id="side-panel" class="w-80 bg-gray-900 border-r border-gray-800 flex flex-col z-20 shadow-2xl">
      <div class="p-6 border-b border-gray-800">
        <h3 class="text-xs font-black text-blue-500 uppercase tracking-widest italic">Global Base Stats</h3>
        <p class="text-[9px] text-gray-500 mt-1 uppercase leading-none">Sheet: "DR Overview"</p>
      </div>

      <div class="p-6 space-y-6 overflow-y-auto flex-1 custom-scrollbar">
        <div class="relative group" name="special-forces">
          <label class="text-[10px] font-black text-blue-400 uppercase block mb-1">Special Forces (SF)</label>
          <input
            type="number"
            id="base-sf"
            value="30"
            oninput="calculateDR()"
            class="w-full bg-gray-950 border border-gray-800 rounded-lg px-3 py-2 text-xl font-mono outline-none focus:border-blue-600 transition-colors" />

          <div
            class="absolute left-full ml-4 top-0 w-72 bg-gray-900 border border-blue-900/50 rounded-xl p-4 hidden group-hover:flex items-center gap-4 z-[100] shadow-2xl pointer-events-none backdrop-blur-md">
            <div class="w-16 h-16 flex-shrink-0 bg-gray-800 rounded border border-gray-700 overflow-hidden">
              <img src="img/explanations/sf_advanced_protection.png" onerror="handleImageError(this)" class="w-full h-full object-cover" />
            </div>
            <div class="flex-1">
              <h4 class="text-blue-400 font-black text-[10px] uppercase mb-1">Advanced Protection</h4>
              <p class="text-[9px] text-gray-300 italic leading-snug">The 2 Advanced Protection Nodes each grant 15% damage reduction (DR) for Group 1.</p>
            </div>
          </div>
        </div>

        <div>
          <label class="text-[10px] font-black text-blue-400 uppercase block mb-1">Drone (Boost/Chip)</label>
          <input
            type="number"
            id="base-drone"
            value="14"
            oninput="calculateDR()"
            class="w-full bg-gray-950 border border-gray-800 rounded-lg px-3 py-2 text-xl font-mono outline-none focus:border-blue-600 transition-colors" />
        </div>

        <div>
          <label class="text-[10px] font-black text-yellow-600 uppercase block mb-1">Extra Global DR (%)</label>
          <input
            type="number"
            id="base-extra"
            value="0"
            oninput="calculateDR()"
            class="w-full bg-gray-950 border border-gray-700 rounded-lg px-3 py-2 text-xl font-mono text-yellow-500 outline-none focus:border-yellow-600 transition-colors" />
        </div>

        <div class="h-[1px] bg-gray-800 my-4"></div>
      </div>
    </aside>

    <main class="flex-1 flex flex-col relative bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-gray-900 via-gray-950 to-black">
      <header class="p-4 flex justify-between items-center bg-gray-900/50 border-b border-gray-800 backdrop-blur-md">
        <div class="flex items-center gap-4">
          <span class="text-xl font-black text-gray-500 tracking-tighter italic">A5H - 810</span>
          <nav class="flex bg-gray-800 p-1 rounded-lg">
            <button onclick="switchSquad(1)" id="btn-squad-1" class="px-4 py-1 text-xs font-bold rounded-md transition-all">SQUAD 1</button>
            <button onclick="switchSquad(2)" id="btn-squad-2" class="px-4 py-1 text-xs font-bold rounded-md transition-all">SQUAD 2</button>
            <button onclick="switchSquad(3)" id="btn-squad-3" class="px-4 py-1 text-xs font-bold rounded-md transition-all">SQUAD 3</button>
          </nav>
        </div>
        <button onclick="clearFormation()" class="text-[10px] font-bold text-red-500 uppercase border border-red-900/50 px-3 py-1 rounded hover:bg-red-900/20 transition-all">
          Clear Squad
        </button>
        <button
          onclick="resetFullDatabase()"
          class="text-[10px] font-bold text-orange-500 uppercase border border-orange-900/50 px-3 py-1 rounded hover:bg-orange-900/20 transition-all ml-2">
          Reset DB
        </button>
      </header>

      <div id="tactical-field" class="flex-1 flex flex-col items-center justify-center p-4 gap-4 md:gap-8">
        <div class="flex flex-row gap-2 md:gap-6 justify-center items-center w-full">
          <div id="slot-2" class="squad-slot" ondrop="handleDrop(event, 2)" ondragover="handleDragOver(event)"></div>
          <div id="slot-3" class="squad-slot" ondrop="handleDrop(event, 3)" ondragover="handleDragOver(event)"></div>
          <div id="slot-4" class="squad-slot" ondrop="handleDrop(event, 4)" ondragover="handleDragOver(event)"></div>
        </div>
        <div class="flex flex-row gap-4 md:gap-16 justify-center items-center w-full">
          <div id="slot-0" class="squad-slot" ondrop="handleDrop(event, 0)" ondragover="handleDragOver(event)"></div>
          <div id="slot-1" class="squad-slot" ondrop="handleDrop(event, 1)" ondragover="handleDragOver(event)"></div>
        </div>
      </div>

      <div class="stats-footer w-full bg-gray-900/80 p-6 border-t border-gray-800 backdrop-blur-xl flex justify-center">
        <div class="text-center">
          <span id="global-status" class="text-[10px] text-gray-300 font-bold uppercase tracking-[0.5em] italic"> Umzi is a bum </span>
        </div>
      </div>
    </main>

    <aside id="hero-storage-panel" class="w-80 bg-gray-900 border-l border-gray-800 flex flex-col z-20 shadow-2xl">
      <div class="p-6 border-b border-gray-800">
        <div class="flex justify-between items-center mb-4">
          <div>
            <h3 class="text-xs font-black text-white uppercase tracking-widest italic">Hero Storage</h3>
            <p class="text-[9px] text-gray-500 mt-1 uppercase">Filter & Search</p>
          </div>
          <span id="hero-count" class="text-[10px] bg-blue-900/30 text-blue-400 px-2 py-1 rounded font-mono border border-blue-800/50">0</span>
        </div>

        <div class="space-y-3">
          <div class="relative flex items-center">
            <span class="absolute left-3 flex items-center justify-center text-gray-600 pointer-events-none"> üîç </span>
            <input
              type="text"
              id="hero-search"
              oninput="filterHeroes()"
              placeholder="Search hero..."
              class="w-full bg-black border border-gray-800 rounded-lg px-3 py-2 text-[10px] text-gray-300 outline-none focus:border-blue-600 transition-all pl-8 h-9" />
          </div>

          <div class="flex gap-1">
            <button
              onclick="setFilter('All')"
              class="filter-btn active text-[8px] flex-1 bg-gray-800 py-1 rounded border border-gray-700 font-bold uppercase hover:bg-gray-700 transition-all">
              All
            </button>
            <button
              onclick="setFilter('Tank')"
              class="filter-btn text-[8px] flex-1 bg-gray-800/50 py-1 rounded border border-gray-700 font-bold uppercase hover:bg-gray-700 transition-all text-blue-400">
              Tank
            </button>
            <button
              onclick="setFilter('Missile')"
              class="filter-btn text-[8px] flex-1 bg-gray-800/50 py-1 rounded border border-gray-700 font-bold uppercase hover:bg-gray-700 transition-all text-red-400">
              Miss
            </button>
            <button
              onclick="setFilter('Aircraft')"
              class="filter-btn text-[8px] flex-1 bg-gray-800/50 py-1 rounded border border-gray-700 font-bold uppercase hover:bg-gray-700 transition-all text-green-400">
              Air
            </button>
          </div>
        </div>
      </div>

      <div id="hero-storage" class="p-4 grid grid-cols-2 gap-3 overflow-y-auto flex-1 bg-black/20 custom-scrollbar"></div>
    </aside>

    <div
      id="notification-toast"
      class="fixed bottom-24 left-1/2 -translate-x-1/2 translate-y-40 transition-all duration-500 bg-red-600 text-white px-8 py-3 rounded-2xl font-black text-xs shadow-[0_0_30px_rgba(220,38,38,0.5)] z-[200] uppercase tracking-widest">
      Hero already in another squad!
    </div>

    <script src="app.js"></script>
  </body>
</html>
